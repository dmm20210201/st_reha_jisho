<div class="container">
  <div class='row'>
    <div class='col-md-12'>
      <div class="rehabilitation-body">
        <h2><%= @rehabilitation.training_name %></h2>
        <p><strong>言語病理学的所見：</strong><%= @rehabilitation.speech_pathological_findings %></p>
        <p><strong>適応・注意事項：</strong><%= @rehabilitation.adaptation_precautions %></p>
        <p><strong>準備物：</strong><%= @rehabilitation.items %></p>
        <p><strong>訓練内容：</strong></br><%= @rehabilitation.training_content %></p>
        <p><%= attachment_image_tag @rehabilitation, :training_image %></p>
        <p>投稿日時：<%= @rehabilitation.created_at.to_s(:datetime) %></p>
        <% if @rehabilitation.user == current_user %>
          <%= link_to "訓練編集", edit_rehabilitation_path(@rehabilitation.id), class: "btn btn-warning" %>
          <%= link_to "訓練削除", rehabilitation_path(@rehabilitation.id), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger" %>
        <% end %>
        </br>
        </br>
        <% if @rehabilitation.favorited_by?(current_user) %>
          <p>いいね:
            <%= link_to rehabilitation_favorites_path(@rehabilitation.id), method: :delete do %>
              ♥<%= @rehabilitation.favorites.count %>
            <% end %>
          </p>
          <% else %>
          <p>いいね:
            <%= link_to rehabilitation_favorites_path(@rehabilitation.id), method: :post do %>
              ♡<%= @rehabilitation.favorites.count %>
            <% end %>
          </p>
        <% end %>

        <div class="comments">
          <p>コメント:<%= @rehabilitation.rehabilitation_comments.count %>件</p>
          <% @rehabilitation.rehabilitation_comments.each do |rehabilitation_comment| %>
            <%= attachment_image_tag @rehabilitation.user, :profile_image, :fill, 10, 10, fallback: "no_image.jpg" %>
            <%= rehabilitation_comment.user.name %>
            <%= rehabilitation_comment.created_at.to_s(:datetime) %><%= rehabilitation_comment.comment %>
            <% if rehabilitation_comment.user == current_user %>
              <div class="comment-delete">
                <%= link_to "コメントを削除", rehabilitation_rehabilitation_comment_path(rehabilitation_comment.rehabilitation, rehabilitation_comment), method: :delete, "data-confirm" => "本当に削除しますか？" %>
              </div>
            <% end %>
          <% end %>
        </div>

        <div class="new-comment">
          <%= form_with(model:[@rehabilitation, @rehabilitation_comment], local: true) do |f| %>
            <%= f.text_area :comment, rows:'5', cols:"50", placeholder: "意見・質問等" %></br>
            <%= f.submit "コメントする" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>